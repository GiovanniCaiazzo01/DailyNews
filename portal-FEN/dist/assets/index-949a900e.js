import{u as q,r as d,t as I,H as Q,j as G,F as ie,a as C,b as fe}from"./index-3e28e5dd.js";import{u as le,L as ge,P as ce,C as he,F as ue,B as ve}from"./useUser-d069b6d1.js";const ke=()=>{const{logout:e}=q();return d.useEffect(()=>{e()},[]),null};function ye(e){var t,s,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(s=ye(e[t]))&&(a&&(a+=" "),a+=s);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function D(){for(var e,t,s=0,a="";s<arguments.length;)(e=arguments[s++])&&(t=ye(e))&&(a&&(a+=" "),a+=t);return a}const W=e=>typeof e=="number"&&!isNaN(e),U=e=>typeof e=="string",N=e=>typeof e=="function",ee=e=>U(e)||N(e)?e:null,ae=e=>d.isValidElement(e)||U(e)||N(e)||W(e);function Ee(e,t,s){s===void 0&&(s=300);const{scrollHeight:a,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=a+"px",i.transition=`all ${s}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,s)})})}function ne(e){let{enter:t,exit:s,appendPosition:a=!1,collapse:i=!0,collapseDuration:o=300}=e;return function(n){let{children:r,position:T,preventExitTransition:y,done:m,nodeRef:l,isIn:h}=n;const c=a?`${t}--${T}`:t,g=a?`${s}--${T}`:s,v=d.useRef(0);return d.useLayoutEffect(()=>{const u=l.current,p=c.split(" "),w=O=>{O.target===l.current&&(u.dispatchEvent(new Event("d")),u.removeEventListener("animationend",w),u.removeEventListener("animationcancel",w),v.current===0&&O.type!=="animationcancel"&&u.classList.remove(...p))};u.classList.add(...p),u.addEventListener("animationend",w),u.addEventListener("animationcancel",w)},[]),d.useEffect(()=>{const u=l.current,p=()=>{u.removeEventListener("animationend",p),i?Ee(u,m,o):m()};h||(y?p():(v.current=1,u.className+=` ${g}`,u.addEventListener("animationend",p)))},[h]),I.createElement(I.Fragment,null,r)}}function de(e,t){return{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}}const P={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const s=this.list.get(e).filter(a=>a!==t);return this.list.set(e,s),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const s=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(s)})}},J=e=>{let{theme:t,type:s,...a}=e;return I.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${s})`,...a})},oe={info:function(e){return I.createElement(J,{...e},I.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return I.createElement(J,{...e},I.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return I.createElement(J,{...e},I.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return I.createElement(J,{...e},I.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return I.createElement("div",{className:"Toastify__spinner"})}};function Ie(e){const[,t]=d.useReducer(c=>c+1,0),[s,a]=d.useState([]),i=d.useRef(null),o=d.useRef(new Map).current,n=c=>s.indexOf(c)!==-1,r=d.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:n,getToast:c=>o.get(c)}).current;function T(c){let{containerId:g}=c;const{limit:v}=r.props;!v||g&&r.containerId!==g||(r.count-=r.queue.length,r.queue=[])}function y(c){a(g=>c==null?[]:g.filter(v=>v!==c))}function m(){const{toastContent:c,toastProps:g,staleId:v}=r.queue.shift();h(c,g,v)}function l(c,g){let{delay:v,staleId:u,...p}=g;if(!ae(c)||function(R){return!i.current||r.props.enableMultiContainer&&R.containerId!==r.props.containerId||o.has(R.toastId)&&R.updateId==null}(p))return;const{toastId:w,updateId:O,data:b}=p,{props:E}=r,A=()=>y(w),k=O==null;k&&r.count++;const L={...E,style:E.toastStyle,key:r.toastKey++,...p,toastId:w,updateId:O,data:b,closeToast:A,isIn:!1,className:ee(p.className||E.toastClassName),bodyClassName:ee(p.bodyClassName||E.bodyClassName),progressClassName:ee(p.progressClassName||E.progressClassName),autoClose:!p.isLoading&&(M=p.autoClose,V=E.autoClose,M===!1||W(M)&&M>0?M:V),deleteToast(){const R=de(o.get(w),"removed");o.delete(w),P.emit(4,R);const B=r.queue.length;if(r.count=w==null?r.count-r.displayedToast:r.count-1,r.count<0&&(r.count=0),B>0){const S=w==null?r.props.limit:1;if(B===1||S===1)r.displayedToast++,m();else{const $=S>B?B:S;r.displayedToast=$;for(let _=0;_<$;_++)m()}}else t()}};var M,V;L.iconOut=function(R){let{theme:B,type:S,isLoading:$,icon:_}=R,x=null;const z={theme:B,type:S};return _===!1||(N(_)?x=_(z):d.isValidElement(_)?x=d.cloneElement(_,z):U(_)||W(_)?x=_:$?x=oe.spinner():(K=>K in oe)(S)&&(x=oe[S](z))),x}(L),N(p.onOpen)&&(L.onOpen=p.onOpen),N(p.onClose)&&(L.onClose=p.onClose),L.closeButton=E.closeButton,p.closeButton===!1||ae(p.closeButton)?L.closeButton=p.closeButton:p.closeButton===!0&&(L.closeButton=!ae(E.closeButton)||E.closeButton);let H=c;d.isValidElement(c)&&!U(c.type)?H=d.cloneElement(c,{closeToast:A,toastProps:L,data:b}):N(c)&&(H=c({closeToast:A,toastProps:L,data:b})),E.limit&&E.limit>0&&r.count>E.limit&&k?r.queue.push({toastContent:H,toastProps:L,staleId:u}):W(v)?setTimeout(()=>{h(H,L,u)},v):h(H,L,u)}function h(c,g,v){const{toastId:u}=g;v&&o.delete(v);const p={content:c,props:g};o.set(u,p),a(w=>[...w,u].filter(O=>O!==v)),P.emit(4,de(p,p.props.updateId==null?"added":"updated"))}return d.useEffect(()=>(r.containerId=e.containerId,P.cancelEmit(3).on(0,l).on(1,c=>i.current&&y(c)).on(5,T).emit(2,r),()=>{o.clear(),P.emit(3,r)}),[]),d.useEffect(()=>{r.props=e,r.isToastActive=n,r.displayedToast=s.length}),{getToastToRender:function(c){const g=new Map,v=Array.from(o.values());return e.newestOnTop&&v.reverse(),v.forEach(u=>{const{position:p}=u.props;g.has(p)||g.set(p,[]),g.get(p).push(u)}),Array.from(g,u=>c(u[0],u[1]))},containerRef:i,isToastActive:n}}function pe(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function me(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function we(e){const[t,s]=d.useState(!1),[a,i]=d.useState(!1),o=d.useRef(null),n=d.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,r=d.useRef(e),{autoClose:T,pauseOnHover:y,closeToast:m,onClick:l,closeOnClick:h}=e;function c(b){if(e.draggable){b.nativeEvent.type==="touchstart"&&b.nativeEvent.preventDefault(),n.didMove=!1,document.addEventListener("mousemove",p),document.addEventListener("mouseup",w),document.addEventListener("touchmove",p),document.addEventListener("touchend",w);const E=o.current;n.canCloseOnClick=!0,n.canDrag=!0,n.boundingRect=E.getBoundingClientRect(),E.style.transition="",n.x=pe(b.nativeEvent),n.y=me(b.nativeEvent),e.draggableDirection==="x"?(n.start=n.x,n.removalDistance=E.offsetWidth*(e.draggablePercent/100)):(n.start=n.y,n.removalDistance=E.offsetHeight*(e.draggablePercent===80?1.5*e.draggablePercent:e.draggablePercent/100))}}function g(b){if(n.boundingRect){const{top:E,bottom:A,left:k,right:L}=n.boundingRect;b.nativeEvent.type!=="touchend"&&e.pauseOnHover&&n.x>=k&&n.x<=L&&n.y>=E&&n.y<=A?u():v()}}function v(){s(!0)}function u(){s(!1)}function p(b){const E=o.current;n.canDrag&&E&&(n.didMove=!0,t&&u(),n.x=pe(b),n.y=me(b),n.delta=e.draggableDirection==="x"?n.x-n.start:n.y-n.start,n.start!==n.x&&(n.canCloseOnClick=!1),E.style.transform=`translate${e.draggableDirection}(${n.delta}px)`,E.style.opacity=""+(1-Math.abs(n.delta/n.removalDistance)))}function w(){document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",w),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",w);const b=o.current;if(n.canDrag&&n.didMove&&b){if(n.canDrag=!1,Math.abs(n.delta)>n.removalDistance)return i(!0),void e.closeToast();b.style.transition="transform 0.2s, opacity 0.2s",b.style.transform=`translate${e.draggableDirection}(0)`,b.style.opacity="1"}}d.useEffect(()=>{r.current=e}),d.useEffect(()=>(o.current&&o.current.addEventListener("d",v,{once:!0}),N(e.onOpen)&&e.onOpen(d.isValidElement(e.children)&&e.children.props),()=>{const b=r.current;N(b.onClose)&&b.onClose(d.isValidElement(b.children)&&b.children.props)}),[]),d.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||u(),window.addEventListener("focus",v),window.addEventListener("blur",u)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",v),window.removeEventListener("blur",u))}),[e.pauseOnFocusLoss]);const O={onMouseDown:c,onTouchStart:c,onMouseUp:g,onTouchEnd:g};return T&&y&&(O.onMouseEnter=u,O.onMouseLeave=v),h&&(O.onClick=b=>{l&&l(b),n.canCloseOnClick&&m()}),{playToast:v,pauseToast:u,isRunning:t,preventExitTransition:a,toastRef:o,eventHandlers:O}}function Te(e){let{closeToast:t,theme:s,ariaLabel:a="close"}=e;return I.createElement("button",{className:`Toastify__close-button Toastify__close-button--${s}`,type:"button",onClick:i=>{i.stopPropagation(),t(i)},"aria-label":a},I.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},I.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Le(e){let{delay:t,isRunning:s,closeToast:a,type:i="default",hide:o,className:n,style:r,controlledProgress:T,progress:y,rtl:m,isIn:l,theme:h}=e;const c=o||T&&y===0,g={...r,animationDuration:`${t}ms`,animationPlayState:s?"running":"paused",opacity:c?0:1};T&&(g.transform=`scaleX(${y})`);const v=D("Toastify__progress-bar",T?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":m}),u=N(n)?n({rtl:m,type:i,defaultClassName:v}):D(v,n);return I.createElement("div",{role:"progressbar","aria-hidden":c?"true":"false","aria-label":"notification timer",className:u,style:g,[T&&y>=1?"onTransitionEnd":"onAnimationEnd"]:T&&y<1?null:()=>{l&&a()}})}const Ce=e=>{const{isRunning:t,preventExitTransition:s,toastRef:a,eventHandlers:i}=we(e),{closeButton:o,children:n,autoClose:r,onClick:T,type:y,hideProgressBar:m,closeToast:l,transition:h,position:c,className:g,style:v,bodyClassName:u,bodyStyle:p,progressClassName:w,progressStyle:O,updateId:b,role:E,progress:A,rtl:k,toastId:L,deleteToast:M,isIn:V,isLoading:H,iconOut:R,closeOnClick:B,theme:S}=e,$=D("Toastify__toast",`Toastify__toast-theme--${S}`,`Toastify__toast--${y}`,{"Toastify__toast--rtl":k},{"Toastify__toast--close-on-click":B}),_=N(g)?g({rtl:k,position:c,type:y,defaultClassName:$}):D($,g),x=!!A||!r,z={closeToast:l,type:y,theme:S};let K=null;return o===!1||(K=N(o)?o(z):d.isValidElement(o)?d.cloneElement(o,z):Te(z)),I.createElement(h,{isIn:V,done:M,position:c,preventExitTransition:s,nodeRef:a},I.createElement("div",{id:L,onClick:T,className:_,...i,style:v,ref:a},I.createElement("div",{...V&&{role:E},className:N(u)?u({type:y}):D("Toastify__toast-body",u),style:p},R!=null&&I.createElement("div",{className:D("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!H})},R),I.createElement("div",null,n)),K,I.createElement(Le,{...b&&!x?{key:`pb-${b}`}:{},rtl:k,theme:S,delay:r,isRunning:t,isIn:V,closeToast:l,hide:m,type:y,style:O,className:w,controlledProgress:x,progress:A||0})))},se=function(e,t){return t===void 0&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},Oe=ne(se("bounce",!0));ne(se("slide",!0));ne(se("zoom"));ne(se("flip"));const Y=d.forwardRef((e,t)=>{const{getToastToRender:s,containerRef:a,isToastActive:i}=Ie(e),{className:o,style:n,rtl:r,containerId:T}=e;function y(m){const l=D("Toastify__toast-container",`Toastify__toast-container--${m}`,{"Toastify__toast-container--rtl":r});return N(o)?o({position:m,rtl:r,defaultClassName:l}):D(l,ee(o))}return d.useEffect(()=>{t&&(t.current=a.current)},[]),I.createElement("div",{ref:a,className:"Toastify",id:T},s((m,l)=>{const h=l.length?{...n}:{...n,pointerEvents:"none"};return I.createElement("div",{className:y(m),style:h,key:`container-${m}`},l.map((c,g)=>{let{content:v,props:u}=c;return I.createElement(Ce,{...u,isIn:i(u.toastId),style:{...u.style,"--nth":g+1,"--len":l.length},key:`toast-${u.key}`},v)}))}))});Y.displayName="ToastContainer",Y.defaultProps={position:"top-right",transition:Oe,autoClose:5e3,closeButton:Te,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let re,F=new Map,j=[],Ne=1;function be(){return""+Ne++}function _e(e){return e&&(U(e.toastId)||W(e.toastId))?e.toastId:be()}function X(e,t){return F.size>0?P.emit(0,e,t):j.push({content:e,options:t}),t.toastId}function te(e,t){return{...t,type:t&&t.type||e,toastId:_e(t)}}function Z(e){return(t,s)=>X(t,te(e,s))}function f(e,t){return X(e,te("default",t))}f.loading=(e,t)=>X(e,te("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),f.promise=function(e,t,s){let a,{pending:i,error:o,success:n}=t;i&&(a=U(i)?f.loading(i,s):f.loading(i.render,{...s,...i}));const r={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null,delay:100},T=(m,l,h)=>{if(l==null)return void f.dismiss(a);const c={type:m,...r,...s,data:h},g=U(l)?{render:l}:l;return a?f.update(a,{...c,...g}):f(g.render,{...c,...g}),h},y=N(e)?e():e;return y.then(m=>T("success",n,m)).catch(m=>T("error",o,m)),y},f.success=Z("success"),f.info=Z("info"),f.error=Z("error"),f.warning=Z("warning"),f.warn=f.warning,f.dark=(e,t)=>X(e,te("default",{theme:"dark",...t})),f.dismiss=e=>{F.size>0?P.emit(1,e):j=j.filter(t=>e!=null&&t.options.toastId!==e)},f.clearWaitingQueue=function(e){return e===void 0&&(e={}),P.emit(5,e)},f.isActive=e=>{let t=!1;return F.forEach(s=>{s.isToastActive&&s.isToastActive(e)&&(t=!0)}),t},f.update=function(e,t){t===void 0&&(t={}),setTimeout(()=>{const s=function(a,i){let{containerId:o}=i;const n=F.get(o||re);return n&&n.getToast(a)}(e,t);if(s){const{props:a,content:i}=s,o={...a,...t,toastId:t.toastId||e,updateId:be()};o.toastId!==e&&(o.staleId=e);const n=o.render||i;delete o.render,X(n,o)}},0)},f.done=e=>{f.update(e,{progress:1})},f.onChange=e=>(P.on(4,e),()=>{P.off(4,e)}),f.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},f.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},P.on(2,e=>{re=e.containerId||e,F.set(re,e),j.forEach(t=>{P.emit(0,t.content,t.options)}),j=[]}).on(3,e=>{F.delete(e.containerId||e),F.size===0&&P.off(0).off(1).off(5)});const Pe=(e,t)=>{const[s,a]=d.useState(),[i,o]=d.useState(!1),n=async()=>{if(o(()=>!0),!(e!=null&&e.ucode))return[];const T=(await Q.get("/user/saved-news",e.ucode)).data.news;a(()=>T),o(()=>!1)};return d.useEffect(()=>{n()},[t]),{savedNews:s,loading:i}},Be=()=>{const[e,t]=d.useState(0),{user:s}=le(),{isLogged:a,verify_auth:i}=q(),{savedNews:o,loading:n}=Pe(s,e),r=(y,m)=>{y?f.success(m,{position:f.POSITION.TOP_RIGHT}):f.error(m,{position:f.POSITION.TOP_RIGHT})};return G(ie,{children:[C(ge,{loading:n}),C(ce,{}),G("div",{style:{display:"flex",flexWrap:"wrap",width:"100%",alignContent:"center",justifyContent:"center"},children:[C(he,{onDelete:async y=>{i();const{ucode:m}=s,l=y.title,h=await Q.delete("/user/saved-news/delete/",m,{title:l});r(h.result,h.message),t(c=>c+1)},news:o,isLogged:a}),C(Y,{})]})]})};const De=()=>{var l,h,c,g,v;const e=le(),{verify_auth:t}=q(),[s,a]=d.useState(!1),[i,o]=d.useState({name:(l=e.user)==null?void 0:l.name,surname:(h=e.user)==null?void 0:h.surname,email:(c=e.user)==null?void 0:c.email,age:(g=e.user)==null?void 0:g.age,language:(v=e.user)==null?void 0:v.language}),n=(u,p)=>{u?f.success(p,{position:f.POSITION.TOP_RIGHT}):f.error(p,{position:f.POSITION.TOP_RIGHT})},r=(u,p)=>{o(w=>({...w,[u]:p}))},T=async u=>{u.preventDefault(),a(()=>!0),t();const p=await Q.put("/users/update",i);n(p.result,p.message),e.fetchUser(),a(()=>!1)},y=[{upperLabel:"Name",label:"Your Name",type:"text",name:"name",value:i.name},{upperLabel:"Surname",label:"Your Surname",type:"text",name:"surname",value:i.surname},{upperLabel:"Age",label:"Your Age",type:"number",name:"age",value:i.age},{upperLabel:"E-mail",label:"example@example.com",type:"email",name:"email",value:i.email}];return G(ie,{children:[C(ce,{}),C(ue,{loading:s,header:"Your Profile Info",field:y,onSubmit:T,onUserInput:r,btnLabel:"Salva",btnType:"submit",haveSelect:!0,selectData:[{value:"ar",label:"Arabic"},{value:"de",label:"German"},{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"he",label:"Hebrew"},{value:"it",label:"Italian"},{value:"nl",label:"Dutch"},{value:"no",label:"Norwegian"},{value:"pt",label:"Portuguese"},{value:"ru",label:"Russian"},{value:"se",label:"Swedish"},{value:"zh",label:"Chinese"}],defaultSelectValue:i.language||"es: Italian",upperSelect:"Chose your news language"}),C(Y,{})]})};const Me=()=>{const[e,t]=d.useState(!1),[s,a]=d.useState({name:"",surname:"",age:"",email:"",password:"","Repeat Password":""}),{isLogged:i}=q(),o=fe();i===!0&&o("/");const n=(m,l)=>m?f.success(l,{position:f.POSITION.TOP_RIGHT}):f.error(l,{position:f.POSITION.TOP_RIGHT});return G(ve,{about:"Background for a register page",children:[C(ue,{header:"Register",field:[{upperLabel:"Name",label:"Your Name",type:"text",name:"name"},{upperLabel:"Surname",label:"Your Surname",type:"text",name:"surname"},{upperLabel:"Age",label:"Your Age",type:"number",name:"age"},{upperLabel:"E-mail",label:"example@example.com",type:"email",name:"email"},{upperLabel:"Password",label:"Your Password",type:"password",name:"password"},{upperLabel:"Confirm Password",label:"Repeat Password",type:"password",name:"Repeat Password"}],onSubmit:async m=>{t(()=>!0),m.preventDefault();const l=await Q.post("/users/register",{...s});if(n(l.result,l.message),l.result)return o("/login");t(()=>!1)},onUserInput:(m,l)=>{a(h=>({...h,[m]:l}))},btnLabel:"Register",btnType:"submit",haveSecondBtn:!0,secondBtnLabel:"Login",onClick:m=>m.target.name==="login"&&o("/login"),loading:e}),C(Y,{})]})};const He=()=>{const e=fe(),{isLogged:t}=q(),[s,a]=d.useState(!1),[i,o]=d.useState({email:"",password:""}),n=(l,h)=>{l?f.success(h,{position:f.POSITION.TOP_RIGHT}):f.error(h,{position:f.POSITION.TOP_RIGHT})},r=async l=>localStorage.setItem("token",l.data.token),T=(l,h)=>{o(c=>({...c,[l]:h}))},y=async l=>{a(()=>!0),l.preventDefault();const h=await Q.post("/auth/login",{...i});if(n(h.result,h.message),h.result===!0)return await r(h),e("/");a(()=>!1)},m=[{upperLabel:"E-mail",label:"example@example.com",type:"email",name:"email"},{upperLabel:"Password",label:"Your Password",type:"password",name:"password"}];return d.useEffect(()=>{t===!0&&e("/")},[]),G(ve,{about:"Background for a login page",children:[C(ue,{header:"Login",field:m,onSubmit:y,onUserInput:T,btnLabel:"Login",btnType:"submit",haveSecondBtn:!0,secondBtnLabel:"Register",loading:s,onClick:l=>l.target.name==="register"&&e("/register")}),C(Y,{})]})},Se=async(e,t)=>{const s=await Q.post("/news/",{nextPage:e,language:t}),a=(s==null?void 0:s.data.news)??[],i=s.data.nextPage;return{retrievedNews:a,nextPageId:i}},Re=()=>{const[e,t]=d.useState([]),[s,a]=d.useState(""),[i,o]=d.useState(1),[n,r]=d.useState(!1),T=d.useRef(s),{user:y}=le(),{isLogged:m}=q(),l=d.useCallback(async()=>{r(()=>!0);const h=m?y.language:"",{retrievedNews:c,nextPageId:g}=await Se(T.current,h);t(v=>[...v,...c]),a(g),T.current=g,r(()=>!1)},[m,y==null?void 0:y.language,i]);return d.useEffect(()=>{const h=()=>{Math.ceil(window.innerHeight+window.scrollY)>=document.documentElement.scrollHeight&&o(g=>g+1)};return window.addEventListener("scroll",h),()=>window.removeEventListener("scroll",h)},[]),d.useEffect(()=>{l()},[l]),{news:e,loading:n}},$e=()=>{const{verify_auth:e}=q(),{news:t,loading:s}=Re(),a=(o,n)=>{o?f.success(n,{position:f.POSITION.TOP_RIGHT}):f.error(n,{position:f.POSITION.TOP_RIGHT})};return G(ie,{children:[C(ge,{loading:s}),C(ce,{}),G("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:[C(he,{news:t,onSave:async o=>{e(),o.ucode=user.ucode;const n=await Q.post("/user/saved-news/save",{news:o});a(n.result,n.message)},isLogged:!0}),C(Y,{})]})]})};export{He as Login,ke as Logout,$e as NewsList,De as Profile,Me as Register,Be as SavedNews};
